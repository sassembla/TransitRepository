<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="TransitRepository : BaaS-connector for iOS" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>TransitRepository</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/sassembla/TransitRepository">Fork Me on GitHub</a>

          <h1 id="project_title">TransitRepository</h1>
          <h2 id="project_tagline">BaaS-connector for iOS</h2>

          <section id="downloads">
            <a class="zip_download_link" href="https://github.com/sassembla/TransitRepository/zipball/master">Download this project as a .zip file</a>
            <a class="tar_download_link" href="https://github.com/sassembla/TransitRepository/tarball/master">Download this project as a tar.gz file</a>
          </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Motivation</h3>

<p>ParseとかBaaS(ggr)を、ObjCから、NSURLConnectionぽく使う為のライブラリです。<br><br>
          なんでTransit(中継)なの？というと、
          iOSのアプリケーションとかを作っていて、値調整したいなーとか、実機でテスト実行した値を収集したいなーとかあるのですが、<br><br>
          それらのためにワザワザKVSとか立ち上げたりAPI作ったりするのが面倒だったため、<br>
          「いっそin-outが簡単で、後腐れ無い、母艦-iOS間の値渡しの中継点があればいいのに」<br>
          というモチベで作っています。</p>
        
<h3>Usage</h3>
         <p>
          DLして解凍して、Parse(https://parse.com/)のアカウントとClientKeyと<br>
          Parse.frameworkを入れれば、テストが通る、、はずです。
          </p>
          
<h3>Input Code</h3>
          <pre><code>NSString * connectionIdentifier = @"このコネクションをIdentifyする名前";
              
TransitRepositoryConnection * transitRepoCon
    = [[TransitRepositoryConnection alloc]
              connection:connectionIdentifier withMasterName:@"受け取り主の名前"];
              
NSString * val
              = [[NSString alloc]initWithString:@"something"];

NSString * key = @"キー";
              
[transitRepoCon save:val withTypeIdentifier:key];
</code></pre>

<p>Parseとかと通信し、値(この場合saveDictオブジェクト)を特定のKey-Valueの形で保存。<br><br>
          transitRepoConは非同期で通信し、通信完了後、受け渡しブロックを抜けると勝手に消えます。<br><br>
          
          通信結果は、　withMasterName:@"値の受け取り主の名前" で指定した<br>MessengerSystemに届きます。<br><br>
          
          transitRepoCon消滅時、値のポインタや、通信結果を保持しているポインタも消えるので、<br>
          受け取ったらまあその時点で受け取りオブジェクト作るとかしてください。
          </p>

          
<h3>Observe Code</h3>
          <p>受け取りコードは下記。
          </p>
          <pre><code>messenger = [[MessengerSystem alloc]initWithBodyID:self 
              withSelector:@selector(receiver:) withName:@"受け取り主の名前"];
              
- (void) receiver:(NSNotification * )notif {
    NSString * exec = [messenger getExecFromNotification:notif];
    NSDictionary * dict
              = [messenger getTagValueDictionaryFromNotification:notif];
            
    if ([exec isEqualToString:TRANSIT_CONNECTION_EXEC_SAVED]) {
        NSAssert([dict valueForKey:@"result"], @"result required");
        m_result
         = [[NSDictionary alloc]initWithDictionary:[dict valueForKey:@"result"]];
    }
}
          </code></pre><br>
          

<h3>Dependencies</h3>

<p>NSNotificationを使ったメッセージング処理を行うライブラリ<br>
          MessengerSystem(http://sassembla.github.com/MessengerSystem/)<br>
          と、<br><br>
          コメントに時間制限をつけるライブラリ<br>
          TimeMine(個別未公開)<br><br>
          に依存しています。<br>
          Repo上に入っているTimeMineは、使いたければ適当に取り除いてください。</p>

<h3>API</h3>

<p>とりあえずCRUDはそろえました。<br>
          APIは、テスト(http://bit.ly/HUqzwK)見た方が速いと思います。</p>
          
<h3>License</h3>          
          <p>
          公式になにかとして供給する予定は今の所ありません。
          </p>
          
<h3>Support or Contact</h3>

<p>いまのところParseにしか対応してないので、他のサービス使いたいわー、とかあれば、連絡ください。</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">TransitRepository maintained by <a href="https://github.com/sassembla">sassembla</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
